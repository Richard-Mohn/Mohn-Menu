# Firebase App Hosting configuration for Next.js
# Docs: https://firebase.google.com/docs/app-hosting

env:
  # Build variables - visible during build
  variables:
    NODE_ENV: "production"

  # Secret variables - managed via Firebase CLI or Console
  secrets:
    - NEXT_PUBLIC_FIREBASE_API_KEY
    - NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
    - NEXT_PUBLIC_FIREBASE_DATABASE_URL
    - NEXT_PUBLIC_FIREBASE_PROJECT_ID
    - NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
    - NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
    - NEXT_PUBLIC_FIREBASE_APP_ID
    - NEXT_PUBLIC_MAPBOX_TOKEN
    - NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY
    - STRIPE_SECRET_KEY
    - NEXT_PUBLIC_OWNER_SECRET_CODE

buildConfig:
  # Next.js build command
  buildCommand: "npm install && npm run build"
  
nodeConfig:
  # Node.js runtime version
  nodeVersion: "20"

runConfig:
  # Min/max instances for auto-scaling
  minInstances: 1
  maxInstances: 10
  
  # Memory and CPU
  memory: 1024
  cpu: 2
  
  # Concurrent requests per instance
  concurrency: 80
  
  # Request timeout
  timeoutSeconds: 60
